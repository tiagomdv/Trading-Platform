<!doctype html>
<html lang="en">

  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>

    <script src="https://kit.fontawesome.com/1f21790597.js" crossorigin="anonymous"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js"></script>

    <link href="/static/css/styles.css" rel="stylesheet">

    <title>You're in: {% block title %}{% endblock %}</title>
  </head>

  <body>

    <nav class="navbar navbar-expand-lg navbar-light">
        <a class="navbar-brand iconBtn" href="/"><i class="fas fa-money-check-alt fa-3x"></i> </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
        <div id="navbar" class="navbar-nav">
            <a class="btnToPres middleBtn" href="/market" name="goBtn">Market<span class="sr-only"></span></a>
            <a class="btnToPres middleBtn" href="/wallet" name="goBtn">Wallet</a>
            <a class="btnToPres middleBtn" href="/account" name="goBtn">Account</a>
            <a class="rightBtn logBtn"  href="/login" id="logBtn">Login</a>
            <a class="rightBtn regBtn" href="/register" id="regBtn">Register</a>
            <a class="rightBtn logOBtn" style="visibility: hidden; display: none" href="/logout" id="logOBtn" name="goBtn">Logout</a>
        </div>
        </div>
    </nav>

    <div class="container-xl" style="margin: 40px 0px;"></div>

    {% block main %}

    {% endblock %}

    <footer>
      Website created by <a href="https://www.linkedin.com/in/tiagomdv/">Tiago Vieira</a>.
    </footer>

    </body>

    {% if session.user_id %}<div id="loggedIn"></div>{% endif %}
    
    <form id="goWallet" action="/wallet" method="get" style="display: none"></form>

    <script>
      const logged = document.getElementById("loggedIn");

      if (logged !== null) {

      const logBtn = document.getElementById("logBtn");
      const regBtn = document.getElementById("regBtn");
      const logOBtn = document.getElementById("logOBtn");

      logBtn.style.visibility = "hidden";
      regBtn.style.visibility = "hidden";
      regBtn.style.display = "none";

      logOBtn.style.visibility = "visible";
      logOBtn.style.display = "inline";
      }

      //_________Submit button events after preventDefault__________
      $("a[name='goBtn']").click(function() {
        var text = $(this).text();

        if (text === "Market") {
          $("#goWallet").attr("action", "/market");
        }
        else if (text === "Wallet") {
          $("#goWallet").attr("action", "/wallet");
        }
        else if (text === "Account") {
          $("#goWallet").attr("action", "/account");
        }
        else if (text === "Logout") {
          $("#goWallet").attr("action", "/logout");
        }

        $("#goWallet").submit()
      })

    </script>

</html>
